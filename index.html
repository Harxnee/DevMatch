<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>FreelancerHub</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>

<style>
body { font-family: Inter, sans-serif; background: #f9fafb }
.sidebar-item.active { background:#4f46e5;color:white }
.chat-bubble { max-width:70%; padding:10px;border-radius:12px;margin:6px }
.client { background:#f1f5f9 }
.freelancer { background:#4f46e5;color:white;margin-left:auto }
</style>
</head>

<body class="flex min-h-screen">

<!-- Sidebar -->
<aside class="w-64 bg-white border-r p-4">
  <h1 class="text-xl font-bold mb-6 text-indigo-600">FreelancerHub</h1>
  <nav class="space-y-2">
    <button onclick="showPage('dashboard')" class="sidebar-item active w-full text-left p-2 rounded">Dashboard</button>
    <button onclick="showPage('invoices')" class="sidebar-item w-full text-left p-2 rounded">Invoices</button>
    <button onclick="showPage('chat')" class="sidebar-item w-full text-left p-2 rounded">Chat</button>
    <button onclick="showPage('proposals')" class="sidebar-item w-full text-left p-2 rounded">Proposals</button>
    <button onclick="showPage('settings')" class="sidebar-item w-full text-left p-2 rounded">Settings</button>
  </nav>
</aside>

<!-- Main -->
<main class="flex-1 p-6">

<!-- Dashboard -->
<section id="dashboard">
  <h2 class="text-2xl font-bold mb-4">Dashboard</h2>
  <p>Welcome back! Your workspace is ready.</p>
</section>

<!-- Invoices -->
<section id="invoices" class="hidden">
  <div class="flex justify-between mb-4">
    <h2 class="text-2xl font-bold">Invoices</h2>
    <button onclick="openModal()" class="bg-indigo-600 text-white px-4 py-2 rounded">New Invoice</button>
  </div>

  <table class="w-full bg-white rounded shadow">
    <thead class="bg-gray-100">
      <tr><th class="p-2">Client</th><th>Amount</th><th>Status</th></tr>
    </thead>
    <tbody id="invoiceTable"></tbody>
  </table>
</section>

<!-- Chat -->
<section id="chat" class="hidden">
  <h2 class="text-2xl font-bold mb-4">Client Chat</h2>
  <div id="chatBox" class="bg-white p-4 h-64 overflow-y-auto rounded border"></div>

  <div class="flex mt-2 gap-2">
    <input id="chatInput" class="flex-1 border p-2 rounded" placeholder="Type message..." />
    <button onclick="sendMessage()" class="bg-indigo-600 text-white px-4 rounded">Send</button>
  </div>
</section>

<!-- Proposals -->
<section id="proposals" class="hidden">
  <h2 class="text-2xl font-bold mb-4">AI Proposal Generator</h2>

  <textarea id="proposalInput" class="w-full border p-3 rounded" placeholder="Describe project..."></textarea>

  <button onclick="generateProposal()" class="mt-3 bg-indigo-600 text-white px-4 py-2 rounded">Generate</button>

  <pre id="proposalOutput" class="bg-gray-100 p-4 mt-4 rounded"></pre>
</section>

<!-- Settings -->
<section id="settings" class="hidden">
  <h2 class="text-2xl font-bold mb-4">Settings</h2>
  <p>Profile, preferences, integrations coming here.</p>
</section>

</main>

<!-- Invoice Modal -->
<div id="modal" class="fixed inset-0 bg-black bg-opacity-40 hidden flex items-center justify-center">
  <div class="bg-white p-6 rounded w-96">
    <h3 class="font-bold text-lg mb-4">Create Invoice</h3>

    <input id="clientName" class="border p-2 w-full mb-2" placeholder="Client name" />
    <input id="amount" type="number" class="border p-2 w-full mb-2" placeholder="Amount" />

    <div class="flex justify-end gap-2">
      <button onclick="closeModal()" class="px-3 py-1 border rounded">Cancel</button>
      <button onclick="saveInvoice()" class="bg-indigo-600 text-white px-3 py-1 rounded">Save</button>
    </div>
  </div>
</div>

<script>
/* Navigation */
function showPage(page) {
  document.querySelectorAll("section").forEach(s => s.classList.add("hidden"));
  document.getElementById(page).classList.remove("hidden");

  document.querySelectorAll(".sidebar-item").forEach(b => b.classList.remove("active"));
  event.target.classList.add("active");
}

/* Invoice Logic */
let invoices = JSON.parse(localStorage.getItem("invoices") || "[]");

function renderInvoices() {
  const table = document.getElementById("invoiceTable");
  table.innerHTML = invoices.map(i => `
    <tr class="border-t">
      <td class="p-2">${i.client}</td>
      <td>$${i.amount}</td>
      <td>${i.status}</td>
    </tr>
  `).join("");
}

function openModal() {
  document.getElementById("modal").classList.remove("hidden");
}

function closeModal() {
  document.getElementById("modal").classList.add("hidden");
}

function saveInvoice() {
  const client = document.getElementById("clientName").value;
  const amount = document.getElementById("amount").value;

  invoices.push({ client, amount, status: "Sent" });
  localStorage.setItem("invoices", JSON.stringify(invoices));
  renderInvoices();
  closeModal();
}

/* Chat */
let chat = JSON.parse(localStorage.getItem("chat") || "[]");

function renderChat() {
  const box = document.getElementById("chatBox");
  box.innerHTML = chat.map(m =>
    `<div class="chat-bubble ${m.role}">${m.text}</div>`
  ).join("");
}

function sendMessage() {
  const input = document.getElementById("chatInput");
  if (!input.value) return;

  chat.push({ role: "freelancer", text: input.value });
  chat.push({ role: "client", text: "Got it, thanks!" });

  localStorage.setItem("chat", JSON.stringify(chat));
  input.value = "";
  renderChat();
}

/* AI Proposal */
function generateProposal() {
  const text = document.getElementById("proposalInput").value;
  document.getElementById("proposalOutput").textContent =
`Proposal Draft:

Based on your project:
"${text}"

I will deliver high-quality work with clear milestones, timely updates, and post-delivery support.

Estimated timeline: 7â€“10 days.
Looking forward to working together.`;
}

/* Init */
renderInvoices();
renderChat();
</script>
</body>
</html>
